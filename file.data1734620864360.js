import{m as d,b as u}from"./field.service1734620864360.js";import"./index1734620864360.js";import{w as c,B as v,d as y,g as w,m as b,D as m}from"./index17346208643602.js";var S=Object.defineProperty,L=Object.getOwnPropertyDescriptor,E=(_,e,t,a)=>{for(var r=L(e,t),i=_.length-1,s;i>=0;i--)(s=_[i])&&(r=s(e,t,r)||r);return r&&S(e,t,r),r};class g{constructor(e){this.apiService=e}async get_list_field_specifications(e){return this.apiService.override_url(e),await this.apiService.find_all()}}E([c({group:"especificacao"})],g.prototype,"get_list_field_specifications");const O=new g(new v("https://dev.gerais.mg.def.br","depe/service".concat("/especificacao")));var D=Object.defineProperty,N=Object.getOwnPropertyDescriptor,p=(_,e,t,a)=>{for(var r=N(e,t),i=_.length-1,s;i>=0;i--)(s=_[i])&&(r=s(e,t,r)||r);return r&&D(e,t,r),r};class l{constructor(e){this.apiService=e}async get_table_search(e,{page:t,rowsPerPage:a,order:r,sortBy:i},s){return this.apiService.override_url(s,`${t}-${a}`),await this.apiService.save({...e},{params:{order:r,sortBy:i}}).then(n=>typeof n=="string"?JSON.parse(n):n)}async get_table_release({page:e,rowsPerPage:t,order:a,sortBy:r},i,s){return this.apiService.override_url(i,`${e}-${t}`),await this.apiService.save({},{params:{secaoPai:s,order:a,sortBy:r}}).then(n=>typeof n=="string"?JSON.parse(n):n)}async get_release_by_id(e,t){return this.apiService.override_url(e),await this.apiService.find_by_id(t)}async post_release(e,t){return this.apiService.override_url(e),await this.apiService.save({...t,auditProject:"DEP"})}async put_release(e,{id:t,...a}){return this.apiService.override_url(e,String(t)),await this.apiService.update({...a,auditProject:"DEP"}).then(r=>(y.createNotify("Tudo certo! Registro alterado com sucesso!","positive","primary"),r))}async delete_release(e,t){return this.apiService.override_url("deletar",e),await this.apiService.update({sgProjetoModificador:"DEP",sgAcaoModificadora:"DELLAN",noEndpointModificador:this.apiService._url()},t)}async confirm_release(e){return this.apiService.override_url("confirmar-processamento",e),await this.apiService.save()}async send_file(e){this.apiService.override_url("gerar",e);const t=`Bearer ${w()}`;return await fetch(b("https://dev.gerais.mg.def.br",this.apiService._url()),{method:"POST",headers:{authorization:t}}).then(a=>{var i;if(!a.ok)throw new Error(a.statusText);const r=((i=a.headers.get("Content-Disposition"))==null?void 0:i.split("filename=")[1].replace(/"/g,""))??"arquivo.txt";return a.text().then(s=>({text:s,filename:r}))}).then(({text:a,filename:r})=>{const i=new Blob([a],{type:"text/plain"}),s=URL.createObjectURL(i),n=document.createElement("a");n.href=s,n.download=r,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)})}}p([c({group:"table-search"})],l.prototype,"get_table_search");p([c({group:"table-release"})],l.prototype,"get_table_release");p([c({group:"release_by_id"})],l.prototype,"get_release_by_id");p([c({group:"post_release"})],l.prototype,"post_release");p([c({group:"put_release"})],l.prototype,"put_release");p([c({group:"delete_release"})],l.prototype,"delete_release");p([c({group:"delete_release"})],l.prototype,"confirm_release");p([c({group:"send_file"})],l.prototype,"send_file");const o=new l(new v("https://dev.gerais.mg.def.br","depe/service".concat("/lancamento")));class I extends m{async get_list_field_file(){const{FILE:e,SET_FIELD_FILE:t}=d();if(!e.length)return await u.get_list_field_file().then(a=>t(a.dados))}async get_list_field_batch(){const{BATCH:e,SET_FIELD_BATCH:t}=d();if(!e.length)return await u.get_list_field_batch().then(a=>t(a.dados))}async get_list_field_line(){const{LINE:e,SET_FIELD_LINE:t}=d();if(!e.length)return await u.get_list_field_line().then(a=>t([...a.dados.map(r=>{var i;return{...r,valores:(i=r.valores)==null?void 0:i.sort((s,n)=>{const h=Number(s.valor),f=Number(n.valor);return isNaN(h)?1:isNaN(f)?-1:h-f})}})]))}async get_list_field_specifications(e){return await O.get_list_field_specifications(e).then(t=>t.dados)}async get_release_file_by_id(e){return await o.get_release_by_id("ARQUIVO",e)}async get_release_batch_by_id(e){return await o.get_release_by_id("LOTE",e)}async get_release_line_by_id(e){return await o.get_release_by_id("LINHA",e)}async post_file(e){return await o.post_release("ARQUIVO",e).then(t=>t)}async put_file(e){return await o.put_release("ARQUIVO",e).then(t=>t)}async delete_file(e){return await o.delete_release("ARQUIVO",e).then(t=>t)}async post_batch(e){return await o.post_release("LOTE",e).then(t=>t)}async put_batch(e){return await o.put_release("LOTE",e).then(t=>t)}async delete_batch(e){return await o.delete_release("LOTE",e).then(t=>t)}async post_line(e){return await o.post_release("LINHA",e).then(t=>t)}async put_line(e){return await o.put_release("LINHA",e).then(t=>t)}async delete_line(e){return await o.delete_release("LINHA",e).then(t=>t)}async sendFile(e){return await o.send_file(e).then(t=>t)}async confirmRelease(e){return await o.confirm_release(e).then(t=>t)}}const R=new I;export{o as D,R as d};
