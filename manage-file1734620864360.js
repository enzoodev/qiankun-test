import{d as R,s as S,i as T,c as f,n as U,o as $,a as u,w as _,u as s,b as j,e as r,f as n,g as p,j as g,k as J,F as L,Q as v,l as N,m as A}from"./index1734620864360.js";import{Q as D}from"./QForm1734620864360.js";import{form_store_file as b}from"./form_store_file1734620864360.js";import{J as E}from"./index17346208643602.js";import{m as I}from"./field.service1734620864360.js";import{d as e}from"./file.data1734620864360.js";import"./form-store.util1734620864360.js";import"./rule-enum1734620864360.js";const P={class:"row"},z={class:"flex justify-end q-gutter-md q-mt-sm q-mx-sm"},te=R({__name:"manage-file",setup(G){const l=j(),a=l.params.id,{sub_title:h,title:k}=l.meta,i=S(b()),{validateFn:y,resetForm:B,setValues:F,filling:w}=b(),m=T.global.t,C=f(()=>I().getComponentFile),V=f(()=>m(a?"message.invalid_form_file_edit":"message.invalid_form_file_created")),x=[{header:0,title:a?"Alterar":"Cadastrar",havePermission:!0,expandItem:!0}];function Q(){y(V.value).then(t=>{if(a){e.put_file({valores:t,id:a}).then(()=>e.goBack());return}e.post_file({valores:t}).then(()=>e.goBack())})}return U(()=>B()),$(async()=>{await e.get_list_field_file(),a&&await e.get_release_file_by_id(a).then(t=>F(e.getValoresFormatSelect(i.fields.value,e.getReduceValores(t)))),w()}),(t,d)=>(r(),u(s(E),{container:x,title:s(k),"sub-title":s(h)},{section0:_(()=>[n(D,{greedy:"",onSubmit:N(Q,["prevent"])},{default:_(()=>[p("div",P,[(r(!0),g(L,null,J(s(i).fields.value,(o,q)=>{var c;return r(),g("div",{class:"col-md-3 col-sm-6 col-xs-12",key:o.id},[(r(),u(A((c=C.value)==null?void 0:c[q]),{event:o.field,"onUpdate:event":M=>o.field=M,input:{...o,valores:s(e).formatToListTValor(o.valores,"id","valor","descricao")},errors:s(i).errors.value[o.id]},null,40,["event","onUpdate:event","input","errors"]))])}),128))]),p("div",z,[n(v,{label:t.$t("message.cancel"),color:"grey-8",onClick:d[0]||(d[0]=o=>s(e).goBack())},null,8,["label"]),n(v,{label:t.$t("message.confirm"),color:"primary",type:"submit"},null,8,["label"])])]),_:1})]),_:1},8,["title","sub-title"]))}});export{te as default};
