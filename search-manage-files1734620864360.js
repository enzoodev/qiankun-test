import{d as U,i as j,s as b,r as Q,c as J,o as H,a as y,w as s,u as e,b as K,e as v,f as a,Q as n,g as O,h as k,j as S,k as W,F as X,l as w,m as Z}from"./index1734620864360.js";import{Q as Y}from"./QForm1734620864360.js";import{m as ee,d as l,_ as ae}from"./depe.data1734620864360.js";import{f as A,m as oe,_ as te,a as se}from"./field.service1734620864360.js";import{_ as d,J as ne}from"./index17346208643602.js";import{_ as ie}from"./header-component.vue_vue_type_style_index_0_lang1734620864360.js";import{C as re}from"./pagination-store.util1734620864360.js";import{t as le}from"./table.data1734620864360.js";import{f as ce}from"./field.data1734620864360.js";import{d as p}from"./file.data1734620864360.js";import"./q-table-column.builder1734620864360.js";var N=(c=>(c.PENDENTE_ENVIO="PENDENTE_ENVIO",c.AGUARDANDO_PROCESSAMENTO="AGUARDANDO_PROCESSAMENTO",c.PROCESSADO="PROCESSADO",c.REJEITADO="REJEITADO",c))(N||{});const x={AGUARDANDO_PROCESSAMENTO:"Aguardando Processamento",PENDENTE_ENVIO:"Pendente de Envio",PROCESSADO:"Processado",REJEITADO:"Rejeitado"},me="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20version='1.1'%20id='Camada_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2048%2048'%20style='enable-background:new%200%200%2048%2048;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill-rule:evenodd;clip-rule:evenodd;fill:%23686868;}%20%3c/style%3e%3cg%3e%3cpath%20class='st0'%20d='M6.6,7.3L44.2,24L6.6,40.8l11.1-16.9L6.6,7.3z%20M3.8,7.2L14.8,24L3.8,40.8L10.2,24L3.8,7.2z'/%3e%3c/g%3e%3c/svg%3e",de={class:"row"},fe={class:"flex justify-end q-gutter-md q-mb-lg q-mx-md"},ye=U({__name:"search-manage-files",setup(c){const I=K(),{sub_title:P,title:h}=I.meta,f=j.global.t,{situacao:g,situacaoAttrs:L,dataLancamento:_,dataLancamentoAttrs:q,errors:D}=b(A()),C=b(A()),u=ee(),$=l.formatListItems(x),R=Q([{campo:"dataLancamento",nome:"Data de Envio",fun:t=>l.formatDate(t,"DD-MM-AAAA")??"Não Informado"},{campo:"situacao",nome:"Situação do Arquivo",fun:t=>x[t]??"Não Informado"}]),F=[{header:0,title:"Pesquisar",havePermission:!0,expandItem:!0}],T=J(()=>oe().getComponentGenerico);function G(t){const i=()=>{p.delete_file(t).then(()=>m(u.pagination))};l.confirmDialog(i,{message:"Deseja remover o arquivo de lançamento de Despesa de Pessoal? Esta ação não poderá ser desfeita."})}async function V(){A().resetForm(),await m(new re)}async function z(t){p.confirmDialog(()=>p.sendFile(t).then(()=>m(u.pagination)),{message:"Deseja enviar o arquivo para a validação pelo GRP? Esta ação não poderá ser desfeita."})}async function B(t){p.confirmDialog(()=>p.confirmRelease(t).then(()=>m(u.pagination)),{message:"Deseja concluir o processamento do arquivo? Após a confirmação, ele não poderá mais ser editado."})}async function m(t){await l.get_table_search(t)}return H(async()=>{const t=await le.get_colum_table_file();R.value.push(...t),ce.getFieldsListByIds(t)}),(t,i)=>(v(),y(e(ne),{container:F,title:e(h),"sub-title":e(P)},{"right-top":s(()=>[a(n,{icon:"fa-solid fa-plus",color:"primary",label:e(f)("message.new"),onClick:i[0]||(i[0]=o=>e(l).go_to("GERENCIAR_ARQUIVO"))},null,8,["label"])]),section0:s(()=>[a(Y,{greedy:"",onSubmit:w(m,["prevent"])},{default:s(()=>[O("div",de,[a(te,{event:e(_),"onUpdate:event":i[1]||(i[1]=o=>k(_)?_.value=o:null),errors:e(D).fileSubmissionDate,field:e(_),nome:e(f)("message.file_submission_date"),"field-attrs":e(q)},null,8,["event","errors","field","nome","field-attrs"]),a(se,{input:{field:e(g),nome:e(f)("message.file_status"),fieldAttrs:e(L),obrigatorio:!1,valores:e($)},event:e(g),"onUpdate:event":i[2]||(i[2]=o=>k(g)?g.value=o:null),errors:e(D).fileStatus},null,8,["input","event","errors"]),(v(!0),S(X,null,W(e(C).fields.value,(o,E)=>{var r;return v(),S("div",{class:"col-md-3 col-sm-6 col-xs-12",key:o.id},[(v(),y(Z((r=T.value)==null?void 0:r[E]),{event:o.field,"onUpdate:event":M=>o.field=M,input:o,errors:e(C).errors.value[o.id]},null,40,["event","onUpdate:event","input","errors"]))])}),128))]),O("div",fe,[a(n,{label:e(f)("message.clear"),color:"grey-8",onClick:w(V,["prevent"])},null,8,["label"]),a(n,{label:e(f)("message.search"),color:"primary",icon:"search",type:"submit"},null,8,["label"])])]),_:1}),a(ie,{class:"q-mx-md",title:"Listagem","icon-btn":"fa-solid fa-file-excel",btn:{iconBtn:"fa-solid fa-file-excel"}},{slot:s(()=>[a(ae,{col:R.value,rows:e(u).get_list,pagination:e(u).pagination,request:m,"have-actions":!0},{default:s(({action:{row:{id:o,situacao:E}}})=>[a(n,{icon:"fa-solid fa-check",flat:"",size:"sm",round:"",color:"grey-8",disable:E!==e(N).AGUARDANDO_PROCESSAMENTO,onClick:r=>B(o)},{default:s(()=>[a(d,{data:"Concluir Processamento"})]),_:2},1032,["disable","onClick"]),a(n,{icon:"fa-solid fa-folder",flat:"",size:"sm",round:"",color:"grey-8",onClick:r=>e(l).go_to("GERENCIAR_LOTE",{id:o})},{default:s(()=>[a(d,{data:"Gerenciar Lote do Arquivo"})]),_:2},1032,["onClick"]),a(n,{icon:"fa-solid fa-list",flat:"",size:"sm",round:"",color:"grey-8",onClick:r=>e(l).go_to("GERENCIAR_ESPECIFICACOES",{id:o})},{default:s(()=>[a(d,{data:"Gerenciar Especificações"})]),_:2},1032,["onClick"]),a(n,{icon:"fa-solid fa-pen",flat:"",size:"sm",round:"",color:"grey-8",onClick:r=>e(l).go_to("GERENCIAR_ARQUIVO",{id:o})},{default:s(()=>[a(d,{data:"Alterar Arquivo"})]),_:2},1032,["onClick"]),a(n,{icon:"fa-solid fa-trash",flat:"",size:"sm",round:"",color:"grey-8",onClick:r=>G(o)},{default:s(()=>[a(d,{data:"Remover Arquivo"})]),_:2},1032,["onClick"]),a(n,{flat:"",size:"sm",icon:`img:${e(me)}`,round:"",class:"q-mr-sm",color:"grey-8",onClick:r=>z(o)},{default:s(()=>[a(d,{data:"Enviar Arquivo"})]),_:2},1032,["icon","onClick"])]),_:1},8,["col","rows","pagination"])]),_:1})]),_:1},8,["title","sub-title"]))}});export{ye as default};
