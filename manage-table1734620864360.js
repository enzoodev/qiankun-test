import{S as H,T as K,U as L,c as F,V as h,W as D,X as Y,d as U,e as j,a as z,w as l,f as e,p as V,g as v,t as k,i as Z,r as m,v as ee,o as ae,u as n,b as te,l as $,Q as C,E as T,x as se}from"./index1734620864360.js";import{b as le,a as oe,Q as I}from"./q-table-column.builder1734620864360.js";import{Q as ne,_ as re}from"./_plugin-vue_export-helper1734620864360.js";import{Q as ie}from"./QForm1734620864360.js";import{_ as ce}from"./header-component.vue_vue_type_style_index_0_lang1734620864360.js";import{a as S}from"./field.service1734620864360.js";import{_ as de,J as ue}from"./index17346208643602.js";import{f as A}from"./field.data1734620864360.js";import{t as q}from"./table.data1734620864360.js";const me=H({name:"QBanner",props:{...K,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(i,{slots:p}){const{proxy:{$q:b}}=Y(),w=L(i,b),o=F(()=>"q-banner row items-center"+(i.dense===!0?" q-banner--dense":"")+(w.value===!0?" q-banner--dark q-dark":"")+(i.rounded===!0?" rounded-borders":"")),c=F(()=>`q-banner__actions row items-center justify-end col-${i.inlineActions===!0?"auto":"all"}`);return()=>{const r=[h("div",{class:"q-banner__avatar col-auto row items-center self-start"},D(p.avatar)),h("div",{class:"q-banner__content col text-body2"},D(p.default))],f=D(p.action);return f!==void 0&&r.push(h("div",{class:c.value},f)),h("div",{class:o.value+(i.inlineActions===!1&&f!==void 0?" q-banner--top-padding":""),role:"alert"},r)}}}),fe={class:"text-weight-medium q-my-xs q-ml-md q-pt-sm",style:{color:"#686868"}},ve=U({__name:"banner",props:{message:{type:String,default:"Já existem contatos cadastrados! Confira se os dados inseridos estão corretos!"}},setup(i){return(p,b)=>(j(),z(me,{class:"q-mb-lg q-mt-md q-pa-md",style:{"background-color":"rgba(249, 190, 78, 0.6)","border-radius":"4px"}},{avatar:l(()=>[e(V,{class:"q-mt-sm",name:"fa-solid fa-circle-info",style:{color:"#686868"},size:"25px"})]),default:l(()=>[v("div",fe,k(i.message),1)]),_:1}))}}),pe={class:"row items-center"},ge={class:"flex justify-end"},_e=["textContent"],be=["textContent"],ye={class:"col flex justify-end q-mt-md"},xe=U({__name:"manage-table",setup(i){const p=te(),{sub_title:b,title:w}=p.meta,{t:o}=Z.global,c=m("ARQUIVO"),r=m(null),f=m([]),y=m([]),d=m([]),Q=m([]),E=m(!1),u=m(!1);let x=null;const J=[{header:0,title:o("message.updateCategoryFields"),openItem:!0,expandItem:!1,havePermission:!0}],O=new le().create_column("campo",o("Campo")).build(!0),P=({campo:t})=>x=t,M=t=>t.preventDefault(),N=(t,a)=>{if(!x)return;const s=()=>{E.value=!1,x=null},g={nome:a.label,campo:a.campo};A.dropItemTable(t,g,x,d,"campo","y",s),u.value=!0};function R(){var a;if(!r.value)return;const t={nome:((a=y.value.find(({valor:s})=>s===r.value))==null?void 0:a.descricao)??"",campo:r.value};d.value.push(t),r.value=null,u.value=!0}function W(t){q.confirmDialog(()=>d.value=[...d.value.filter(a=>a.id!=t)]),u.value=!0}function X(){q.saveTable(c.value,d.value).then(()=>u.value=!1)}function G(){d.value=[...Q.value],u.value=!1}async function B(t){const a=await q.getSelectedFieldsByCategory(t),s=await A.getFieldsByCategory(t);d.value=a,Q.value=[...a],y.value=s.map(({nome:g,id:_})=>({valor:_,descricao:g}))}return ee(c,async t=>{await B(t).then(()=>u.value=!1)}),ae(async()=>{f.value=await q.getTablesToSelect(),B(c.value)}),(t,a)=>(j(),z(n(ue),{container:J,title:n(w),"sub-title":n(b)},{section0:l(()=>[e(T,null,{default:l(()=>[v("div",null,[e(ve,{message:n(o)("message.maxColumnsWarning")},null,8,["message"])]),e(ie,{greedy:"",onSubmit:$(X,["prevent"])},{default:l(()=>[v("div",pe,[e(S,{class:"col-md-4 col-sm-6 col-xs-12",event:c.value,"onUpdate:event":a[0]||(a[0]=s=>c.value=s),input:{valores:f.value,field:c.value,nome:n(o)("message.category"),obrigatorio:!1,proibido:f.value.length===0}},null,8,["event","input"]),e(S,{class:"col-md-4 col-sm-6 col-xs-12",event:r.value,"onUpdate:event":a[1]||(a[1]=s=>r.value=s),input:{valores:y.value,field:r.value,nome:n(o)("message.field"),obrigatorio:!1,proibido:y.value.length===0}},null,8,["event","input"])]),v("div",ge,[e(C,{class:"justify-end q-mb-lg",color:"primary",onClick:R},{default:l(()=>[e(V,{name:"fa-solid fa-plus",left:"",size:"xs"}),v("span",{textContent:k(n(o)("message.add"))},null,8,_e)]),_:1})]),e(ce,{class:"q-mx-xs",title:"Colunas"},{slot:l(()=>[e(T,null,{default:l(()=>[e(oe,{ref:"q_table_manage_fields",columns:n(O),rows:d.value,"rows-per-page-options":[0],"hide-pagination":"",class:"shadow-0","row-key":"id"},{body:l(({row:s,selected:g})=>[e(ne,{draggable:"true",onDragstart:_=>P(s),onDragover:M,onDrop:_=>N(_,s),class:se(`${!g||"bg-grey-2"} cursor-pointer`)},{default:l(()=>[e(I,{key:"campo",class:"format-colum-table",style:{"max-width":"10rem"}},{default:l(()=>[v("span",{textContent:k(s.nome)},null,8,be)]),_:2},1024),e(I,{key:"action","auto-width":""},{default:l(()=>[e(C,{color:"grey-8",flat:"",icon:"fa-solid fa-trash",round:"",size:"xs",onClick:_=>W(s.id)},{default:l(()=>[e(de,{data:n(o)("message.remove")},null,8,["data"])]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onDragstart","onDrop","class"])]),_:1},8,["columns","rows"])]),_:1})]),_:1}),v("div",ye,[e(C,{disable:!u.value,label:n(o)("message.cancel"),class:"q-mr-sm",color:"grey-8",onClick:a[2]||(a[2]=$(s=>G(),["prevent"]))},null,8,["disable","label"]),e(C,{disable:!u.value,label:n(o)("message.confirm"),color:"primary",type:"submit"},null,8,["disable","label"])])]),_:1})]),_:1})]),_:1},8,["title","sub-title"]))}}),$e=re(xe,[["__scopeId","data-v-d9921c71"]]);export{$e as default};
