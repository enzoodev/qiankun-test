import{c as w,P as Ht,d as da,a as Et,u as ca,b as ma,e as va,f as fa,r as B,w as we,h as b,T as Ye,g as ha,i as Rt,j as ya,n as xt,Q as R,k as ga,l as pa,m as ba,o as Da,p as _a,q as Ma,s as wa,N as dt,t as Ia,v as xa,x as $t,y as Sa,z as Ca,A as Ya,B as re,C as Ie,D as _,E as Y,F as k,G as Va,H as o,I as Fe,J as de,K as Ve,L as St,M as Te,O as ne,R as $e,S as We,U as qa,V as Je,W as et,X as ka,_ as Oa,Y as Pa}from"./index1734621655117.js";import{p as O,u as Ua,a as Fa,Q as Ta,b as ct,c as Na,d as tt,e as De,f as at,g as Ha,h as Ne}from"./vee-validate1734621655117.js";import{u as Ea,c as Ra,Q as $a,a as ja,r as Aa,b as qe,d as nt,L as La}from"./rowPerPageOptions1734621655117.js";import{i as Qa,_ as Ba}from"./isValid1734621655117.js";import{u as Za,a as za,b as Ga,r as Ka,S as Ct,L as Xa,U as Wa}from"./unit1734621655117.js";import{B as Ja,u as je,Q as ke,a as en,t as tn}from"./index17346216551174.js";import{a as ot}from"./auditProject1734621655117.js";import{F as an}from"./FileSaver.min1734621655117.js";import{u as nn}from"./useGetInventoryStatus1734621655117.js";import{u as on}from"./unitService1734621655117.js";import{f as rn}from"./formatCurrency1734621655117.js";import{f as Yt}from"./formatMandatoryItem1734621655117.js";import"./QSkeleton1734621655117.js";import"./patrimonyService1734621655117.js";function sn(){let e=Object.create(null);return{getCache:(n,l)=>e[n]===void 0?e[n]=typeof l=="function"?l():l:e[n],setCache(n,l){e[n]=l},hasCache(n){return Object.hasOwnProperty.call(e,n)},clearCache(n){n!==void 0?delete e[n]:e=Object.create(null)}}}const ve=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function ln(e,n,l){return Object.prototype.toString.call(e)==="[object Date]"&&(l=e.getDate(),n=e.getMonth()+1,e=e.getFullYear()),mn(mt(e,n,l))}function Vt(e,n,l){return At(cn(e,n,l))}function un(e){return dn(e)===0}function Re(e,n){return n<=6?31:n<=11||un(e)?30:29}function dn(e){const n=ve.length;let l=ve[0],i,s,u,g,d;if(e<l||e>=ve[n-1])throw new Error("Invalid Jalaali year "+e);for(d=1;d<n&&(i=ve[d],s=i-l,!(e<i));d+=1)l=i;return g=e-l,s-g<6&&(g=g-s+U(s+4,33)*33),u=Z(Z(g+1,33)-1,4),u===-1&&(u=4),u}function jt(e,n){const l=ve.length,i=e+621;let s=-14,u=ve[0],g,d,f,q,v;if(e<u||e>=ve[l-1])throw new Error("Invalid Jalaali year "+e);for(v=1;v<l&&(g=ve[v],d=g-u,!(e<g));v+=1)s=s+U(d,33)*8+U(Z(d,33),4),u=g;q=e-u,s=s+U(q,33)*8+U(Z(q,33)+3,4),Z(d,33)===4&&d-q===4&&(s+=1);const D=U(i,4)-U((U(i,100)+1)*3,4)-150,E=20+s-D;return n||(d-q<6&&(q=q-d+U(d+4,33)*33),f=Z(Z(q+1,33)-1,4),f===-1&&(f=4)),{leap:f,gy:i,march:E}}function cn(e,n,l){const i=jt(e,!0);return mt(i.gy,3,i.march)+(n-1)*31-U(n,7)*(n-7)+l-1}function mn(e){const n=At(e).gy;let l=n-621,i,s,u;const g=jt(l,!1),d=mt(n,3,g.march);if(u=e-d,u>=0){if(u<=185)return s=1+U(u,31),i=Z(u,31)+1,{jy:l,jm:s,jd:i};u-=186}else l-=1,u+=179,g.leap===1&&(u+=1);return s=7+U(u,30),i=Z(u,30)+1,{jy:l,jm:s,jd:i}}function mt(e,n,l){let i=U((e+U(n-8,6)+100100)*1461,4)+U(153*Z(n+9,12)+2,5)+l-34840408;return i=i-U(U(e+100100+U(n-8,6),100)*3,4)+752,i}function At(e){let n=4*e+139361631;n=n+U(U(4*e+183187720,146097)*3,4)*4-3908;const l=U(Z(n,1461),4)*5+308,i=U(Z(l,153),5)+1,s=Z(U(l,153),12)+1;return{gy:U(n,1461)-100100+U(8-s,6),gm:s,gd:i}}function U(e,n){return~~(e/n)}function Z(e,n){return e-~~(e/n)*n}const vn=["gregorian","persian"],qt={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>vn.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},fn=["update:modelValue"];function ce(e){return e.year+"/"+O(e.month)+"/"+O(e.day)}function hn(e,n){const l=w(()=>e.disable!==!0&&e.readonly!==!0),i=w(()=>l.value===!0?0:-1),s=w(()=>{const d=[];return e.color!==void 0&&d.push(`bg-${e.color}`),e.textColor!==void 0&&d.push(`text-${e.textColor}`),d.join(" ")});function u(){return e.locale!==void 0?{...n.lang.date,...e.locale}:n.lang.date}function g(d){const f=new Date,q=d===!0?null:0;if(e.calendar==="persian"){const v=ln(f);return{year:v.jy,month:v.jm,day:v.jd}}return{year:f.getFullYear(),month:f.getMonth()+1,day:f.getDate(),hour:q,minute:q,second:q,millisecond:q}}return{editable:l,tabindex:i,headerClass:s,getLocale:u,getCurrentDate:g}}const Lt=864e5,yn=36e5,ut=6e4,Qt="YYYY-MM-DDTHH:mm:ss.SSSZ",gn=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,pn=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,rt={};function bn(e,n){const l="("+n.days.join("|")+")",i=e+l;if(rt[i]!==void 0)return rt[i];const s="("+n.daysShort.join("|")+")",u="("+n.months.join("|")+")",g="("+n.monthsShort.join("|")+")",d={};let f=0;const q=e.replace(pn,D=>{switch(f++,D){case"YY":return d.YY=f,"(-?\\d{1,2})";case"YYYY":return d.YYYY=f,"(-?\\d{1,4})";case"M":return d.M=f,"(\\d{1,2})";case"Mo":return d.M=f++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return d.M=f,"(\\d{2})";case"MMM":return d.MMM=f,g;case"MMMM":return d.MMMM=f,u;case"D":return d.D=f,"(\\d{1,2})";case"Do":return d.D=f++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return d.D=f,"(\\d{2})";case"H":return d.H=f,"(\\d{1,2})";case"HH":return d.H=f,"(\\d{2})";case"h":return d.h=f,"(\\d{1,2})";case"hh":return d.h=f,"(\\d{2})";case"m":return d.m=f,"(\\d{1,2})";case"mm":return d.m=f,"(\\d{2})";case"s":return d.s=f,"(\\d{1,2})";case"ss":return d.s=f,"(\\d{2})";case"S":return d.S=f,"(\\d{1})";case"SS":return d.S=f,"(\\d{2})";case"SSS":return d.S=f,"(\\d{3})";case"A":return d.A=f,"(AM|PM)";case"a":return d.a=f,"(am|pm)";case"aa":return d.aa=f,"(a\\.m\\.|p\\.m\\.)";case"ddd":return s;case"dddd":return l;case"Q":case"d":case"E":return"(\\d{1})";case"do":return f++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return f++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return f++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return d.Z=f,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return d.ZZ=f,"(Z|[+-]\\d{2}\\d{2})";case"X":return d.X=f,"(-?\\d+)";case"x":return d.x=f,"(-?\\d{4,})";default:return f--,D[0]==="["&&(D=D.substring(1,D.length-1)),D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),v={map:d,regex:new RegExp("^"+q)};return rt[i]=v,v}function Bt(e,n){return e!==void 0?e:n!==void 0?n.date:da.date}function kt(e,n=""){const l=e>0?"-":"+",i=Math.abs(e),s=Math.floor(i/60),u=i%60;return l+O(s)+n+O(u)}function Dn(e,n,l,i,s){const u={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(s!==void 0&&Object.assign(u,s),e==null||e===""||typeof e!="string")return u;n===void 0&&(n=Qt);const g=Bt(l,Ht.props),d=g.months,f=g.monthsShort,{regex:q,map:v}=bn(n,g),D=e.match(q);if(D===null)return u;let E="";if(v.X!==void 0||v.x!==void 0){const h=parseInt(D[v.X!==void 0?v.X:v.x],10);if(isNaN(h)===!0||h<0)return u;const F=new Date(h*(v.X!==void 0?1e3:1));u.year=F.getFullYear(),u.month=F.getMonth()+1,u.day=F.getDate(),u.hour=F.getHours(),u.minute=F.getMinutes(),u.second=F.getSeconds(),u.millisecond=F.getMilliseconds()}else{if(v.YYYY!==void 0)u.year=parseInt(D[v.YYYY],10);else if(v.YY!==void 0){const h=parseInt(D[v.YY],10);u.year=h<0?h:2e3+h}if(v.M!==void 0){if(u.month=parseInt(D[v.M],10),u.month<1||u.month>12)return u}else v.MMM!==void 0?u.month=f.indexOf(D[v.MMM])+1:v.MMMM!==void 0&&(u.month=d.indexOf(D[v.MMMM])+1);if(v.D!==void 0){if(u.day=parseInt(D[v.D],10),u.year===null||u.month===null||u.day<1)return u;const h=i!=="persian"?new Date(u.year,u.month,0).getDate():Re(u.year,u.month);if(u.day>h)return u}v.H!==void 0?u.hour=parseInt(D[v.H],10)%24:v.h!==void 0&&(u.hour=parseInt(D[v.h],10)%12,(v.A&&D[v.A]==="PM"||v.a&&D[v.a]==="pm"||v.aa&&D[v.aa]==="p.m.")&&(u.hour+=12),u.hour=u.hour%24),v.m!==void 0&&(u.minute=parseInt(D[v.m],10)%60),v.s!==void 0&&(u.second=parseInt(D[v.s],10)%60),v.S!==void 0&&(u.millisecond=parseInt(D[v.S],10)*10**(3-D[v.S].length)),(v.Z!==void 0||v.ZZ!==void 0)&&(E=v.Z!==void 0?D[v.Z].replace(":",""):D[v.ZZ],u.timezoneOffset=(E[0]==="+"?-1:1)*(60*E.slice(1,3)+1*E.slice(3,5)))}return u.dateHash=O(u.year,6)+"/"+O(u.month)+"/"+O(u.day),u.timeHash=O(u.hour)+":"+O(u.minute)+":"+O(u.second)+E,u}function st(e){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate());n.setDate(n.getDate()-(n.getDay()+6)%7+3);const l=new Date(n.getFullYear(),0,4);l.setDate(l.getDate()-(l.getDay()+6)%7+3);const i=n.getTimezoneOffset()-l.getTimezoneOffset();n.setHours(n.getHours()-i);const s=(n-l)/(Lt*7);return 1+Math.floor(s)}function oe(e,n,l){const i=new Date(e),s=`set${l===!0?"UTC":""}`;switch(n){case"year":case"years":i[`${s}Month`](0);case"month":case"months":i[`${s}Date`](1);case"day":case"days":case"date":i[`${s}Hours`](0);case"hour":case"hours":i[`${s}Minutes`](0);case"minute":case"minutes":i[`${s}Seconds`](0);case"second":case"seconds":i[`${s}Milliseconds`](0)}return i}function He(e,n,l){return(e.getTime()-e.getTimezoneOffset()*ut-(n.getTime()-n.getTimezoneOffset()*ut))/l}function Zt(e,n,l="days"){const i=new Date(e),s=new Date(n);switch(l){case"years":case"year":return i.getFullYear()-s.getFullYear();case"months":case"month":return(i.getFullYear()-s.getFullYear())*12+i.getMonth()-s.getMonth();case"days":case"day":case"date":return He(oe(i,"day"),oe(s,"day"),Lt);case"hours":case"hour":return He(oe(i,"hour"),oe(s,"hour"),yn);case"minutes":case"minute":return He(oe(i,"minute"),oe(s,"minute"),ut);case"seconds":case"second":return He(oe(i,"second"),oe(s,"second"),1e3)}}function lt(e){return Zt(e,oe(e,"year"),"days")+1}function _e(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Ot={YY(e,n,l){const i=this.YYYY(e,n,l)%100;return i>=0?O(i):"-"+O(Math.abs(i))},YYYY(e,n,l){return l??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return _e(e.getMonth()+1)},MM(e){return O(e.getMonth()+1)},MMM(e,n){return n.monthsShort[e.getMonth()]},MMMM(e,n){return n.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return _e(this.Q(e))},D(e){return e.getDate()},Do(e){return _e(e.getDate())},DD(e){return O(e.getDate())},DDD(e){return lt(e)},DDDo(e){return _e(lt(e))},DDDD(e){return O(lt(e),3)},d(e){return e.getDay()},do(e){return _e(e.getDay())},dd(e,n){return n.days[e.getDay()].slice(0,2)},ddd(e,n){return n.daysShort[e.getDay()]},dddd(e,n){return n.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return st(e)},wo(e){return _e(st(e))},ww(e){return O(st(e))},H(e){return e.getHours()},HH(e){return O(e.getHours())},h(e){const n=e.getHours();return n===0?12:n>12?n%12:n},hh(e){return O(this.h(e))},m(e){return e.getMinutes()},mm(e){return O(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return O(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return O(Math.floor(e.getMilliseconds()/10))},SSS(e){return O(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,n,l,i){const s=i??e.getTimezoneOffset();return kt(s,":")},ZZ(e,n,l,i){const s=i??e.getTimezoneOffset();return kt(s)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function _n(e,n,l,i,s){if(e!==0&&!e||e===1/0||e===-1/0)return;const u=new Date(e);if(isNaN(u))return;n===void 0&&(n=Qt);const g=Bt(l,Ht.props);return n.replace(gn,(d,f)=>d in Ot?Ot[d](u,g,i,s):f===void 0?d:f.split("\\]").join("]"))}const ge=20,Mn=["Calendar","Years","Months"],Pt=e=>Mn.includes(e),it=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Me=" — ";function me(e){return e.year+"/"+O(e.month)}const Ut=Et({name:"QDate",props:{...qt,...ca,...ma,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...qt.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:it},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:it},navigationMaxYearMonth:{type:String,validator:it},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Pt}},emits:[...fn,"rangeStart","rangeEnd","navigation"],setup(e,{slots:n,emit:l}){const{proxy:i}=Rt(),{$q:s}=i,u=va(e,s),{getCache:g}=sn(),{tabindex:d,headerClass:f,getLocale:q,getCurrentDate:v}=hn(e,s);let D;const E=fa(e),h=ya(E),F=B(null),M=B(pt()),S=B(q()),se=w(()=>pt()),le=w(()=>q()),j=w(()=>v()),p=B(bt(M.value,S.value)),H=B(e.defaultView),J=w(()=>s.lang.rtl===!0?"right":"left"),X=B(J.value),ee=B(J.value),te=p.value.year,W=B(te-te%ge-(te<0?ge:0)),T=B(null),fe=w(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(u.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),Q=w(()=>e.color||"primary"),z=w(()=>e.textColor||"white"),G=w(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),he=w(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),$=w(()=>he.value.filter(t=>typeof t=="string").map(t=>Ze(t,M.value,S.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ie=w(()=>{const t=a=>Ze(a,M.value,S.value);return he.value.filter(a=>ga(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),xe=w(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=Vt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),x=w(()=>e.calendar==="persian"?ce:(t,a,r)=>_n(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?M.value:a,r===void 0?S.value:r,t.year,t.timezoneOffset)),ae=w(()=>$.value.length+ie.value.reduce((t,a)=>t+1+Zt(xe.value(a.to),xe.value(a.from)),0)),V=w(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(T.value!==null){const r=T.value.init,c=xe.value(r);return S.value.daysShort[c.getDay()]+", "+S.value.monthsShort[r.month-1]+" "+r.day+Me+"?"}if(ae.value===0)return Me;if(ae.value>1)return`${ae.value} ${S.value.pluralDay}`;const t=$.value[0],a=xe.value(t);return isNaN(a.valueOf())===!0?Me:S.value.headerTitle!==void 0?S.value.headerTitle(a,t):S.value.daysShort[a.getDay()]+", "+S.value.monthsShort[t.month-1]+" "+t.day}),N=w(()=>$.value.concat(ie.value.map(a=>a.from)).sort((a,r)=>a.year-r.year||a.month-r.month)[0]),Le=w(()=>$.value.concat(ie.value.map(a=>a.to)).sort((a,r)=>r.year-a.year||r.month-a.month)[0]),vt=w(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(ae.value===0)return Me;if(ae.value>1){const t=N.value,a=Le.value,r=S.value.monthsShort;return r[t.month-1]+(t.year!==a.year?" "+t.year+Me+r[a.month-1]+" ":t.month!==a.month?Me+r[a.month-1]:"")+" "+a.year}return $.value[0].year}),Oe=w(()=>{const t=[s.iconSet.datetime.arrowLeft,s.iconSet.datetime.arrowRight];return s.lang.rtl===!0?t.reverse():t}),ft=w(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):S.value.firstDayOfWeek),zt=w(()=>{const t=S.value.daysShort,a=ft.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),ue=w(()=>{const t=p.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Re(t.year,t.month)}),Gt=w(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),A=w(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),L=w(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Qe=w(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return A.value!==null&&A.value.year>=p.value.year&&(t.year.prev=!1,A.value.year===p.value.year&&A.value.month>=p.value.month&&(t.month.prev=!1)),L.value!==null&&L.value.year<=p.value.year&&(t.year.next=!1,L.value.year===p.value.year&&L.value.month<=p.value.month&&(t.month.next=!1)),t}),Pe=w(()=>{const t={};return $.value.forEach(a=>{const r=me(a);t[r]===void 0&&(t[r]=[]),t[r].push(a.day)}),t}),ht=w(()=>{const t={};return ie.value.forEach(a=>{const r=me(a.from),c=me(a.to);if(t[r]===void 0&&(t[r]=[]),t[r].push({from:a.from.day,to:r===c?a.to.day:void 0,range:a}),r<c){let m;const{year:C,month:y}=a.from,I=y<12?{year:C,month:y+1}:{year:C+1,month:1};for(;(m=me(I))<=c;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===c?a.to.day:void 0,range:a}),I.month++,I.month>12&&(I.year++,I.month=1)}}),t}),Se=w(()=>{if(T.value===null)return;const{init:t,initHash:a,final:r,finalHash:c}=T.value,[m,C]=a<=c?[t,r]:[r,t],y=me(m),I=me(C);if(y!==K.value&&I!==K.value)return;const P={};return y===K.value?(P.from=m.day,P.includeFrom=!0):P.from=1,I===K.value?(P.to=C.day,P.includeTo=!0):P.to=ue.value,P}),K=w(()=>me(p.value)),Kt=w(()=>{const t={};if(e.options===void 0){for(let r=1;r<=ue.value;r++)t[r]=!0;return t}const a=typeof e.options=="function"?e.options:r=>e.options.includes(r);for(let r=1;r<=ue.value;r++){const c=K.value+"/"+O(r);t[r]=a(c)}return t}),Xt=w(()=>{const t={};if(e.events===void 0)for(let a=1;a<=ue.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:r=>e.events.includes(r);for(let r=1;r<=ue.value;r++){const c=K.value+"/"+O(r);t[r]=a(c)===!0&&Gt.value(c)}}return t}),Wt=w(()=>{let t,a;const{year:r,month:c}=p.value;if(e.calendar!=="persian")t=new Date(r,c-1,1),a=new Date(r,c-1,0).getDate();else{const m=Vt(r,c,1);t=new Date(m.gy,m.gm-1,m.gd);let C=c-1,y=r;C===0&&(C=12,y--),a=Re(y,C)}return{days:t.getDay()-ft.value-1,endDay:a}}),yt=w(()=>{const t=[],{days:a,endDay:r}=Wt.value,c=a<0?a+7:a;if(c<6)for(let y=r-c;y<=r;y++)t.push({i:y,fill:!0});const m=t.length;for(let y=1;y<=ue.value;y++){const I={i:y,event:Xt.value[y],classes:[]};Kt.value[y]===!0&&(I.in=!0,I.flat=!0),t.push(I)}if(Pe.value[K.value]!==void 0&&Pe.value[K.value].forEach(y=>{const I=m+y-1;Object.assign(t[I],{selected:!0,unelevated:!0,flat:!1,color:Q.value,textColor:z.value})}),ht.value[K.value]!==void 0&&ht.value[K.value].forEach(y=>{if(y.from!==void 0){const I=m+y.from-1,P=m+(y.to||ue.value)-1;for(let Ce=I;Ce<=P;Ce++)Object.assign(t[Ce],{range:y.range,unelevated:!0,color:Q.value,textColor:z.value});Object.assign(t[I],{rangeFrom:!0,flat:!1}),y.to!==void 0&&Object.assign(t[P],{rangeTo:!0,flat:!1})}else if(y.to!==void 0){const I=m+y.to-1;for(let P=m;P<=I;P++)Object.assign(t[P],{range:y.range,unelevated:!0,color:Q.value,textColor:z.value});Object.assign(t[I],{flat:!1,rangeTo:!0})}else{const I=m+ue.value-1;for(let P=m;P<=I;P++)Object.assign(t[P],{range:y.range,unelevated:!0,color:Q.value,textColor:z.value})}}),Se.value!==void 0){const y=m+Se.value.from-1,I=m+Se.value.to-1;for(let P=y;P<=I;P++)t[P].color=Q.value,t[P].editRange=!0;Se.value.includeFrom===!0&&(t[y].editRangeFrom=!0),Se.value.includeTo===!0&&(t[I].editRangeTo=!0)}p.value.year===j.value.year&&p.value.month===j.value.month&&(t[m+j.value.day-1].today=!0);const C=t.length%7;if(C>0){const y=7-C;for(let I=1;I<=y;I++)t.push({i:I,fill:!0})}return t.forEach(y=>{let I="q-date__calendar-item ";y.fill===!0?I+="q-date__calendar-item--fill":(I+=`q-date__calendar-item--${y.in===!0?"in":"out"}`,y.range!==void 0&&(I+=` q-date__range${y.rangeTo===!0?"-to":y.rangeFrom===!0?"-from":""}`),y.editRange===!0&&(I+=` q-date__edit-range${y.editRangeFrom===!0?"-from":""}${y.editRangeTo===!0?"-to":""}`),(y.range!==void 0||y.editRange===!0)&&(I+=` text-${y.color}`)),y.classes=I}),t}),Jt=w(()=>e.disable===!0?{"aria-disabled":"true"}:{});we(()=>e.modelValue,t=>{if(D===t)D=0;else{const a=bt(M.value,S.value);pe(a.year,a.month,a)}}),we(H,()=>{F.value!==null&&i.$el.contains(document.activeElement)===!0&&F.value.focus()}),we(()=>p.value.year+"|"+p.value.month,()=>{l("navigation",{year:p.value.year,month:p.value.month})}),we(se,t=>{It(t,S.value,"mask"),M.value=t}),we(le,t=>{It(M.value,t,"locale"),S.value=t});function gt(){const{year:t,month:a,day:r}=j.value,c={...p.value,year:t,month:a,day:r},m=Pe.value[me(c)];(m===void 0||m.includes(c.day)===!1)&&Ge(c),Be(c.year,c.month)}function ea(t){Pt(t)===!0&&(H.value=t)}function ta(t,a){["month","year"].includes(t)&&(t==="month"?_t:ze)(a===!0?-1:1)}function Be(t,a){H.value="Calendar",pe(t,a)}function aa(t,a){if(e.range===!1||!t){T.value=null;return}const r=Object.assign({...p.value},t),c=a!==void 0?Object.assign({...p.value},a):r;T.value={init:r,initHash:ce(r),final:c,finalHash:ce(c)},Be(r.year,r.month)}function pt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ze(t,a,r){return Dn(t,a,r,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function bt(t,a){const r=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(r.length===0)return Dt();const c=r[r.length-1],m=Ze(c.from!==void 0?c.from:c,t,a);return m.dateHash===null?Dt():m}function Dt(){let t,a;if(e.defaultYearMonth!==void 0){const r=e.defaultYearMonth.split("/");t=parseInt(r[0],10),a=parseInt(r[1],10)}else{const r=j.value!==void 0?j.value:v();t=r.year,a=r.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+O(a)+"/01"}}function _t(t){let a=p.value.year,r=Number(p.value.month)+t;r===13?(r=1,a++):r===0&&(r=12,a--),pe(a,r),G.value===!0&&Ue("month")}function ze(t){const a=Number(p.value.year)+t;pe(a,p.value.month),G.value===!0&&Ue("year")}function na(t){pe(t,p.value.month),H.value=e.defaultView==="Years"?"Months":"Calendar",G.value===!0&&Ue("year")}function oa(t){pe(p.value.year,t),H.value="Calendar",G.value===!0&&Ue("month")}function ra(t,a){const r=Pe.value[a];(r!==void 0&&r.includes(t.day)===!0?Ke:Ge)(t)}function ye(t){return{year:t.year,month:t.month,day:t.day}}function pe(t,a,r){if(A.value!==null&&t<=A.value.year&&((a<A.value.month||t<A.value.year)&&(a=A.value.month),t=A.value.year),L.value!==null&&t>=L.value.year&&((a>L.value.month||t>L.value.year)&&(a=L.value.month),t=L.value.year),r!==void 0){const{hour:m,minute:C,second:y,millisecond:I,timezoneOffset:P,timeHash:Ce}=r;Object.assign(p.value,{hour:m,minute:C,second:y,millisecond:I,timezoneOffset:P,timeHash:Ce})}const c=t+"/"+O(a)+"/01";c!==p.value.dateHash&&(X.value=p.value.dateHash<c==(s.lang.rtl!==!0)?"left":"right",t!==p.value.year&&(ee.value=X.value),xt(()=>{W.value=t-t%ge-(t<0?ge:0),Object.assign(p.value,{year:t,month:a,day:1,dateHash:c})}))}function Mt(t,a,r){const c=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;D=c;const{reason:m,details:C}=wt(a,r);l("update:modelValue",c,m,C)}function Ue(t){const a=$.value[0]!==void 0&&$.value[0].dateHash!==null?{...$.value[0]}:{...p.value};xt(()=>{a.year=p.value.year,a.month=p.value.month;const r=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Re(a.year,a.month);a.day=Math.min(Math.max(1,a.day),r);const c=be(a);D=c;const{details:m}=wt("",a);l("update:modelValue",c,t,m)})}function wt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...ye(a.target),from:ye(a.from),to:ye(a.to)}}:{reason:`${t}-day`,details:ye(a)}}function be(t,a,r){return t.from!==void 0?{from:x.value(t.from,a,r),to:x.value(t.to,a,r)}:x.value(t,a,r)}function Ge(t){let a;if(e.multiple===!0)if(t.from!==void 0){const r=ce(t.from),c=ce(t.to),m=$.value.filter(y=>y.dateHash<r||y.dateHash>c),C=ie.value.filter(({from:y,to:I})=>I.dateHash<r||y.dateHash>c);a=m.concat(C).concat(t).map(y=>be(y))}else{const r=he.value.slice();r.push(be(t)),a=r}else a=be(t);Mt(a,"add",t)}function Ke(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const r=be(t);t.from!==void 0?a=e.modelValue.filter(c=>c.from!==void 0?c.from!==r.from&&c.to!==r.to:!0):a=e.modelValue.filter(c=>c!==r),a.length===0&&(a=null)}Mt(a,"remove",t)}function It(t,a,r){const c=$.value.concat(ie.value).map(m=>be(m,t,a)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);l("update:modelValue",(e.multiple===!0?c:c[0])||null,r)}function sa(){if(e.minimal!==!0)return b("div",{class:"q-date__header "+f.value},[b("div",{class:"relative-position"},[b(Ye,{name:"q-transition--fade"},()=>b("div",{key:"h-yr-"+vt.value,class:"q-date__header-subtitle q-date__header-link "+(H.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...g("vY",{onClick(){H.value="Years"},onKeyup(t){t.keyCode===13&&(H.value="Years")}})},[vt.value]))]),b("div",{class:"q-date__header-title relative-position flex no-wrap"},[b("div",{class:"relative-position col"},[b(Ye,{name:"q-transition--fade"},()=>b("div",{key:"h-sub"+V.value,class:"q-date__header-title-label q-date__header-link "+(H.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...g("vC",{onClick(){H.value="Calendar"},onKeyup(t){t.keyCode===13&&(H.value="Calendar")}})},[V.value]))]),e.todayBtn===!0?b(R,{class:"q-date__header-today self-start",icon:s.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:d.value,onClick:gt}):null])])}function Xe({label:t,type:a,key:r,dir:c,goTo:m,boundaries:C,cls:y}){return[b("div",{class:"row items-center q-date__arrow"},[b(R,{round:!0,dense:!0,size:"sm",flat:!0,icon:Oe.value[0],tabindex:d.value,disable:C.prev===!1,...g("go-#"+a,{onClick(){m(-1)}})})]),b("div",{class:"relative-position overflow-hidden flex flex-center"+y},[b(Ye,{name:"q-transition--jump-"+c},()=>b("div",{key:r},[b(R,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:d.value,...g("view#"+a,{onClick:()=>{H.value=a}})})]))]),b("div",{class:"row items-center q-date__arrow"},[b(R,{round:!0,dense:!0,size:"sm",flat:!0,icon:Oe.value[1],tabindex:d.value,disable:C.next===!1,...g("go+#"+a,{onClick(){m(1)}})})])]}const la={Calendar:()=>[b("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[b("div",{class:"q-date__navigation row items-center no-wrap"},Xe({label:S.value.months[p.value.month-1],type:"Months",key:p.value.month,dir:X.value,goTo:_t,boundaries:Qe.value.month,cls:" col"}).concat(Xe({label:p.value.year,type:"Years",key:p.value.year,dir:ee.value,goTo:ze,boundaries:Qe.value.year,cls:""}))),b("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},zt.value.map(t=>b("div",{class:"q-date__calendar-item"},[b("div",t)]))),b("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[b(Ye,{name:"q-transition--slide-"+X.value},()=>b("div",{key:K.value,class:"q-date__calendar-days fit"},yt.value.map(t=>b("div",{class:t.classes},[t.in===!0?b(R,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:d.value,...g("day#"+t.i,{onClick:()=>{ia(t.i)},onMouseover:()=>{ua(t.i)}})},t.event!==!1?()=>b("div",{class:"q-date__event bg-"+t.event}):null):b("div",""+t.i)]))))])])],Months(){const t=p.value.year===j.value.year,a=c=>A.value!==null&&p.value.year===A.value.year&&A.value.month>c||L.value!==null&&p.value.year===L.value.year&&L.value.month<c,r=S.value.monthsShort.map((c,m)=>{const C=p.value.month===m+1;return b("div",{class:"q-date__months-item flex flex-center"},[b(R,{class:t===!0&&j.value.month===m+1?"q-date__today":null,flat:C!==!0,label:c,unelevated:C,color:C===!0?Q.value:null,textColor:C===!0?z.value:null,tabindex:d.value,disable:a(m+1),...g("month#"+m,{onClick:()=>{oa(m+1)}})})])});return e.yearsInMonthView===!0&&r.unshift(b("div",{class:"row no-wrap full-width"},[Xe({label:p.value.year,type:"Years",key:p.value.year,dir:ee.value,goTo:ze,boundaries:Qe.value.year,cls:" col"})])),b("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},r)},Years(){const t=W.value,a=t+ge,r=[],c=m=>A.value!==null&&A.value.year>m||L.value!==null&&L.value.year<m;for(let m=t;m<=a;m++){const C=p.value.year===m;r.push(b("div",{class:"q-date__years-item flex flex-center"},[b(R,{key:"yr"+m,class:j.value.year===m?"q-date__today":null,flat:!C,label:m,dense:!0,unelevated:C,color:C===!0?Q.value:null,textColor:C===!0?z.value:null,tabindex:d.value,disable:c(m),...g("yr#"+m,{onClick:()=>{na(m)}})})]))}return b("div",{class:"q-date__view q-date__years flex flex-center"},[b("div",{class:"col-auto"},[b(R,{round:!0,dense:!0,flat:!0,icon:Oe.value[0],tabindex:d.value,disable:c(t),...g("y-",{onClick:()=>{W.value-=ge}})})]),b("div",{class:"q-date__years-content col self-stretch row items-center"},r),b("div",{class:"col-auto"},[b(R,{round:!0,dense:!0,flat:!0,icon:Oe.value[1],tabindex:d.value,disable:c(a),...g("y+",{onClick:()=>{W.value+=ge}})})])])}};function ia(t){const a={...p.value,day:t};if(e.range===!1){ra(a,K.value);return}if(T.value===null){const r=yt.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&r.range!==void 0){Ke({target:a,from:r.range.from,to:r.range.to});return}if(r.selected===!0){Ke(a);return}const c=ce(a);T.value={init:a,initHash:c,final:a,finalHash:c},l("rangeStart",ye(a))}else{const r=T.value.initHash,c=ce(a),m=r<=c?{from:T.value.init,to:a}:{from:a,to:T.value.init};T.value=null,Ge(r===c?a:{target:a,...m}),l("rangeEnd",{from:ye(m.from),to:ye(m.to)})}}function ua(t){if(T.value!==null){const a={...p.value,day:t};Object.assign(T.value,{final:a,finalHash:ce(a)})}}return Object.assign(i,{setToday:gt,setView:ea,offsetCalendar:ta,setCalendarTo:Be,setEditingRange:aa}),()=>{const t=[b("div",{class:"q-date__content col relative-position"},[b(Ye,{name:"q-transition--fade"},la[H.value])])],a=ha(n.default);return a!==void 0&&t.push(b("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&h(t,"push"),b("div",{class:fe.value,...Jt.value},[sa(),b("div",{ref:F,class:"q-date__main col column",tabindex:-1},t)])}}}),Ft=Et({name:"QPopupProxy",props:{...Ua,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:n,emit:l,attrs:i}){const{proxy:s}=Rt(),{$q:u}=s,g=B(!1),d=B(null),f=w(()=>parseInt(e.breakpoint,10)),{canShow:q}=Fa({showing:g});function v(){return u.screen.width<f.value||u.screen.height<f.value?"dialog":"menu"}const D=B(v()),E=w(()=>D.value==="menu"?{maxHeight:"99vh"}:{});we(()=>v(),M=>{g.value!==!0&&(D.value=M)});function h(M){g.value=!0,l("show",M)}function F(M){g.value=!1,D.value=v(),l("hide",M)}return Object.assign(s,{show(M){q(M)===!0&&d.value.show(M)},hide(M){d.value.hide(M)},toggle(M){d.value.toggle(M)}}),pa(s,"currentComponent",()=>({type:D.value,ref:d.value})),()=>{const M={ref:d,...E.value,...i,onShow:h,onHide:F};let S;return D.value==="dialog"?S=ba:(S=Ta,Object.assign(M,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),b(S,M,n.default)}}});function Tt(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const n=parseInt(e,10);return isNaN(n)?0:n}const Nt=Da({name:"close-popup",beforeMount(e,{value:n}){const l={depth:Tt(n),handler(i){l.depth!==0&&setTimeout(()=>{const s=_a(e);s!==void 0&&Ma(s,i,l.depth)})},handlerKey(i){wa(i,13)===!0&&l.handler(i)}};e.__qclosepopup=l,e.addEventListener("click",l.handler),e.addEventListener("keyup",l.handlerKey)},updated(e,{value:n,oldValue:l}){n!==l&&(e.__qclosepopup.depth=Tt(n))},beforeUnmount(e){const n=e.__qclosepopup;e.removeEventListener("click",n.handler),e.removeEventListener("keyup",n.handlerKey),delete e.__qclosepopup}}),Ee=(e,n)=>{if(!n)return;const[l,i]=n.split("/");return`${e}-${l}-${i}`};class wn{constructor(n){this.api=n}async getAll({page:n,rowsPerPage:l,...i}){this.api.override_url("pesquisar",`${n}-${l}`);const s=await this.api.find_all({params:{...i,dataInicio:Ee(i.anoInventario,i.dataInicio),dataFim:Ee(i.anoInventario,i.dataFim)}});return{list:s.dados.dados,total:s.dados.totalRegistros}}async openInventory(){return this.api.override_url("abrir-inventario"),(await this.api.save({auditProject:ot})).mensagem}async closeInventory(){return this.api.override_url("fechar-inventario"),(await this.api.save({auditProject:ot})).mensagem}async importInventory(n){const l=new FormData;return l.append("file",n),this.api.override_url("importar-inventario"),(await this.api.save(l)).mensagem}async exportInventory(n){return this.api.override_url("exportar-inventario"),this.api.save({...n,auditProject:ot,dataInicio:Ee(n.anoInventario,n.dataInicio),dataFim:Ee(n.anoInventario,n.dataFim)})}}const Ae=new wn(new Ja("https://dev.gerais.mg.def.br","patrimonio/service".concat("/comissao"))),In=()=>{const e=je(),{mutateAsync:n,isPending:l}=ct({mutationFn:()=>Ae.closeInventory()});return{closeInventory:async()=>{const s=await n();dt.create({message:s,color:"positive"}),e.invalidateQueries({queryKey:[ke.GET_INVENTORY_STATUS]})},isPendingCloseInventory:l}},xn=({handleSubmit:e,closeModal:n})=>{const l=je(),{mutateAsync:i,isPending:s}=ct({mutationFn:g=>Ae.exportInventory(g)});return{exportInventory:e(async g=>{const d=await i(g),f=`INVENTARIO_${g.anoInventario}.xlsx`;an.saveAs(d,f),dt.create({message:"O relatório XLSX foi gerado.",color:"positive"}),l.invalidateQueries({queryKey:[ke.GET_INVENTORY_STATUS]}),n()},()=>{n()}),isPendingExportInventory:s}},Sn=Na().shape({numeroPatrimonio:tt().nullable().test("patrimony-or-others","Preencha o N° Patrimônio ou os outros campos, mas não ambos",function(e){const{situacao:n,codUnidadeResponsavel:l,nomeUnidadeResponsavel:i,descricaoItemMaterial:s,nomeCorresponsavel:u}=this.parent,g=n||l||i||s||u;return e?!g:!0}),situacao:De().nullable(),codUnidadeResponsavel:tt().nullable(),nomeUnidadeResponsavel:De().nullable(),descricaoItemMaterial:De().nullable(),nomeCorresponsavel:De().nullable(),anoInventario:tt().nullable(),dataInicio:De().required("Data de início é obrigatória").test("is-valid","Data de início inválida",function(e){if(!e)return!0;const[n,l]=e.split("/"),i=new Date().getFullYear(),s=new Date(`${n}-${l}-${i}`);return at().isValidSync(s)}).typeError("Data de início inválida"),dataFim:De().required("Data de fim é obrigatória").test("is-valid-or-before-start",function(e){if(!e)return!0;const n=new Date().getFullYear(),[l,i]=e.split("/"),s=new Date(`${l}-${i}-${n}`);if(!at().isValidSync(s))return this.createError({message:"Data de fim inválida"});if(!this.parent.dataInicio)return!0;const[g,d]=e.split("/"),f=new Date(`${g}-${d}-${n}`);return at().isValidSync(f)?s<f?this.createError({message:"Data de fim não pode ser anterior à Data de início"}):!0:this.createError({message:"Data de início inválida"})}).typeError("Data de fim inválida")}),Cn=Ia("useGetCommissionPatrimonyListStore",()=>{const e=new Date().getFullYear(),n=e-1,l="01/01",i="12/31",s=Ea({data:{dataInicio:l,dataFim:i,anoInventario:e}}),{handleSubmit:u,resetForm:g,defineField:d,setFieldValue:f,errors:q}=Ha({validationSchema:Sn,initialValues:s.data.value}),[v,D]=d("numeroPatrimonio"),[E,h]=d("situacao"),[F,M]=d("codUnidadeResponsavel"),[S,se]=d("nomeUnidadeResponsavel"),[le,j]=d("descricaoItemMaterial"),[p,H]=d("anoInventario"),[J,X]=d("dataInicio"),[ee,te]=d("dataFim"),W=w(()=>[v.value,E.value,F.value,S.value,le.value].some(Qa)),T=()=>{f("dataInicio",l),f("dataFim",i)},fe=()=>{f("nomeUnidadeResponsavel",null)},Q=G=>{f("codUnidadeResponsavel",G)},z=u(G=>{s.setFormData(G)});return{search:s,handleSubmit:u,errors:q,hasFilters:W,currentYear:e,previousYear:n,patrimonyNumber:v,status:E,responsibleUnitCode:F,responsibleUnitName:S,description:le,inventoryYear:p,startDate:J,endDate:ee,patrimonyNumberProps:D,statusProps:h,responsibleUnitCodeProps:M,responsibleUnitNameProps:se,descriptionProps:j,inventoryYearProps:H,startDateProps:X,endDateProps:te,onSubmit:z,resetForm:g,onChangeYear:T,onChangeUnitCode:fe,onChangeUnitName:Q}}),Yn=()=>{const{invalidateQueries:e}=je(),n=Cn(),{search:l,handleSubmit:i,currentYear:s,previousYear:u,onSubmit:g,resetForm:d,onChangeYear:f,onChangeUnitCode:q,onChangeUnitName:v}=n,{errors:D,hasFilters:E,patrimonyNumber:h,status:F,responsibleUnitCode:M,responsibleUnitName:S,description:se,inventoryYear:le,startDate:j,endDate:p,patrimonyNumberProps:H,statusProps:J,responsibleUnitCodeProps:X,responsibleUnitNameProps:ee,descriptionProps:te,inventoryYearProps:W,startDateProps:T,endDateProps:fe}=xa(n),Q=w(()=>({...l.data,nomeUnidadeResponsavel:void 0,page:l.pagination.page,rowsPerPage:l.pagination.rowsPerPage})),{data:z,isFetching:G}=en({queryKey:[ke.GET_PATRIMONY_COMMISSION_LIST,Q],queryFn:async()=>{const $=await Ae.getAll(Q.value);return n.search.setRowsNumber($.total),$}}),he=()=>{d(),n.search.reset(),e({queryKey:[ke.GET_PATRIMONY_COMMISSION_LIST],exact:!0})};return{data:z,isFetching:G,hasFilters:E,pagination:l.pagination,setPagination:l.setPagination,reset:he,onSubmit:g,handleSubmit:i,errors:D,form:{patrimonyNumber:h,status:F,responsibleUnitCode:M,responsibleUnitName:S,description:se,inventoryYear:le,currentYear:s,previousYear:u,startDate:j,endDate:p,patrimonyNumberProps:H,statusProps:J,responsibleUnitCodeProps:X,responsibleUnitNameProps:ee,descriptionProps:te,inventoryYearProps:W,startDateProps:T,endDateProps:fe,onChangeYear:f,onChangeUnitCode:q,onChangeUnitName:v}}},Vn=()=>{const e=je(),{mutateAsync:n,isPending:l}=ct({mutationFn:()=>Ae.openInventory()});return{openInventory:async()=>{const s=await n();dt.create({message:s,color:"positive"}),e.invalidateQueries({queryKey:[ke.GET_INVENTORY_STATUS]})},isPendingOpenInventory:l}},qn={key:0,class:"exportReport rounded-borders q-py-lg q-px-lg"},kn={class:"text-subtitle2 text-grey-8"},On={class:"row q-col-gutter-md q-mt-sm"},Pn={class:"col-lg-1 col-sm-2 col-xs-4"},Un={class:"col-lg-1 col-sm-2 col-xs-4"},Fn={class:"col-lg-2 col-sm-4 col-xs-12"},Tn={class:"row items-center justify-end"},Nn={class:"col-lg-2 col-sm-4 col-xs-12"},Hn={class:"row items-center justify-end"},En={class:"col-lg-3 col-sm-6 col-xs-12"},Rn={class:"col-lg-3 col-sm-6 col-xs-12"},$n={class:"row q-col-gutter-md q-mt-md"},jn={class:"col-lg-3 col-sm-6 col-xs-12"},An={class:"col-lg-9 col-sm-12 col-xs-12"},Ln={class:"row q-col-gutter-md q-mt-md"},Qn={class:"col-12"},Bn={class:"flex justify-end q-mt-lg"},Zn={class:"q-mt-lg"},zn={class:"flex row items-center justify-between full-width"},Gn={class:"text-subtitle2"},Kn={key:0,class:"circle bg-red"},Xn={style:{overflow:"hidden","white-space":"collapse","text-overflow":"ellipsis"}},Wn={style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},Jn={class:"q-gutter-xs"},eo={class:"full-width row flex-center text-grey-7"},to=["textContent"],ao={class:"flex justify-end q-mt-lg"},no=$t({__name:"commission",setup(e){const n=Sa(),{title:l,subtitle:i}=n.meta,{t:s}=Ca.global,u=B(!1),g=()=>{u.value=!1},{inventoryPermissions:d}=nn(),{saveSituation:f}=Za(),{data:q,isFetching:v,pagination:D,handleSubmit:E,form:h,hasFilters:F,errors:M,setPagination:S,onSubmit:se,reset:le}=Yn(),{responsibleUnities:j,isFetchingResponsibleUnities:p,filterResponsibleUnitiesFn:H}=on(),{situations:J,isFetchingSituations:X}=za(),{descriptions:ee,isFetchingItemDescriptions:te,filterDescriptionsFn:W}=Ga(),{isPendingOpenInventory:T,openInventory:fe}=Vn(),{isPendingCloseInventory:Q,closeInventory:z}=In(),{isPendingExportInventory:G,exportInventory:he}=xn({handleSubmit:E,closeModal:g}),$=Ra([{key:"situacao",label:s("situation")},{key:"patrimonioForaUnidade",label:s("outOfUnity")},{key:"nomeUnidadeResponsavel",label:s("responsibleUnity")},{key:"numeroPatrimonio",label:s("patrimonyNumberLabel")},{key:"descricaoItemMaterial",label:s("materialItem")},{key:"valorBemPatrimonial",label:s("patrimonyValue"),fn:rn},{key:"acao",label:s("action")}]),ie=[{header:0,title:s("search"),havePermission:!0,expandItem:!0}];return(xe,x)=>{const ae=Ya("router-link");return re(),Ie(ka,null,[_(o(tn),{container:ie,title:o(l),"sub-title":o(i)},{section0:Y(()=>[k("div",null,[k("form",{novalidate:"",onSubmit:x[11]||(x[11]=Va((...V)=>o(se)&&o(se)(...V),["prevent"]))},[o(d).canExport?(re(),Ie("div",qn,[_(Fe,{name:"fa fa-exclamation-circle",size:"sm",class:"q-mr-md",color:"grey-8"}),k("span",kn,de(o(s)("yearReportNecessity")),1)])):Ve("",!0),k("div",On,[k("div",Pn,[_(St,{modelValue:o(h).inventoryYear.value,"onUpdate:modelValue":[x[0]||(x[0]=V=>o(h).inventoryYear.value=V),o(h).onChangeYear],val:o(h).currentYear,label:`${o(s)("inventory")} ${o(h).currentYear}`,"keep-color":"",color:"primary"},null,8,["modelValue","val","label","onUpdate:modelValue"])]),k("div",Un,[_(St,{modelValue:o(h).inventoryYear.value,"onUpdate:modelValue":[x[1]||(x[1]=V=>o(h).inventoryYear.value=V),o(h).onChangeYear],val:o(h).previousYear,label:`${o(s)("inventory")} ${o(h).previousYear}`,"keep-color":"",color:"primary"},null,8,["modelValue","val","label","onUpdate:modelValue"])]),k("div",Fn,[_(Te,ne({modelValue:o(h).startDate.value,"onUpdate:modelValue":x[3]||(x[3]=V=>o(h).startDate.value=V)},o(h).startDateProps.value,{error:!!o(M).dataInicio,"error-message":o(M).dataInicio,label:o(Yt)(o(s)("startDate")),dense:"",mask:"##/##"}),{append:Y(()=>[_(Fe,{name:"event",class:"cursor-pointer"},{default:Y(()=>[_(Ft,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:Y(()=>[_(Ut,ne({modelValue:o(h).startDate.value,"onUpdate:modelValue":x[2]||(x[2]=V=>o(h).startDate.value=V)},o(h).startDateProps.value,{mask:"MM/DD","today-btn":"","years-in-month-view":!1,"navigation-min-year-month":String(o(h).inventoryYear.value)+"/1","navigation-max-year-month":String(o(h).inventoryYear.value)+"/12"}),{default:Y(()=>[k("div",Tn,[$e(_(R,{label:o(s)("cancel"),color:"primary"},null,8,["label"]),[[Nt]])])]),_:1},16,["modelValue","navigation-min-year-month","navigation-max-year-month"])]),_:1})]),_:1})]),_:1},16,["modelValue","error","error-message","label"])]),k("div",Nn,[_(Te,ne({modelValue:o(h).endDate.value,"onUpdate:modelValue":x[5]||(x[5]=V=>o(h).endDate.value=V)},o(h).endDateProps.value,{error:!!o(M).dataFim,"error-message":o(M).dataFim,label:o(Yt)(o(s)("endDate")),dense:"",mask:"##/##"}),{append:Y(()=>[_(Fe,{name:"event",class:"cursor-pointer"},{default:Y(()=>[_(Ft,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:Y(()=>[_(Ut,ne({modelValue:o(h).endDate.value,"onUpdate:modelValue":x[4]||(x[4]=V=>o(h).endDate.value=V)},o(h).endDateProps.value,{mask:"MM/DD","today-btn":"","years-in-month-view":!1,"navigation-min-year-month":String(o(h).inventoryYear.value)+"/1","navigation-max-year-month":String(o(h).inventoryYear.value)+"/12"}),{default:Y(()=>[k("div",Hn,[$e(_(R,{label:o(s)("cancel"),color:"primary"},null,8,["label"]),[[Nt]])])]),_:1},16,["modelValue","navigation-min-year-month","navigation-max-year-month"])]),_:1})]),_:1})]),_:1},16,["modelValue","error","error-message","label"])]),k("div",En,[_(Te,ne({modelValue:o(h).patrimonyNumber.value,"onUpdate:modelValue":x[6]||(x[6]=V=>o(h).patrimonyNumber.value=V)},o(h).patrimonyNumberProps.value,{"no-error-icon":"",error:!!o(M).numeroPatrimonio,"error-message":o(M).numeroPatrimonio,dense:"",clearable:"","clear-icon":"close","emit-value":"","map-options":"",label:o(s)("patrimonyNumber"),type:"number"}),null,16,["modelValue","error","error-message","label"])]),k("div",Rn,[_(Ne,ne({modelValue:o(h).status.value,"onUpdate:modelValue":x[7]||(x[7]=V=>o(h).status.value=V)},o(h).statusProps.value,{options:o(J),error:!!o(M).situacao,"error-message":o(M).situacao,loading:o(X),disable:!!o(h).patrimonyNumber.value,dense:"","map-options":"","emit-value":"",clearable:"","clear-icon":"close",label:o(s)("situation")}),null,16,["modelValue","options","error","error-message","loading","disable","label"])])]),k("div",$n,[k("div",jn,[_(Te,ne({modelValue:o(h).responsibleUnitCode.value,"onUpdate:modelValue":x[8]||(x[8]=V=>o(h).responsibleUnitCode.value=V)},o(h).responsibleUnitCodeProps.value,{error:!!o(M).codUnidadeResponsavel,"error-message":o(M).codUnidadeResponsavel,disable:!!o(h).patrimonyNumber.value,"no-error-icon":"",dense:"",clearable:"","clear-icon":"close","emit-value":"","map-options":"",label:o(s)("responsibleUnityCodeLabel"),type:"number"}),null,16,["modelValue","error","error-message","disable","label"])]),k("div",An,[_(Ne,ne({modelValue:o(h).responsibleUnitName.value,"onUpdate:modelValue":x[9]||(x[9]=V=>o(h).responsibleUnitName.value=V)},o(h).responsibleUnitNameProps.value,{options:o(j),error:!!o(M).nomeUnidadeResponsavel,"error-message":o(M).nomeUnidadeResponsavel,loading:o(p),disable:!!o(h).patrimonyNumber.value||!!o(h).responsibleUnitCode.value,dense:"","map-options":"","emit-value":"",clearable:"","clear-icon":"close","use-input":"","input-debounce":0,onFilter:o(H),label:o(s)("responsibleUnity"),"option-value":"codUnidadeResponsavel","option-label":"nomeUnidadeResponsavel","onUpdate:modelValue":o(h).onChangeUnitName}),null,16,["modelValue","options","error","error-message","loading","disable","onFilter","label","onUpdate:modelValue"])])]),k("div",Ln,[k("div",Qn,[_(Ne,ne({modelValue:o(h).description.value,"onUpdate:modelValue":x[10]||(x[10]=V=>o(h).description.value=V)},o(h).descriptionProps.value,{options:o(ee),error:!!o(M).descricaoItemMaterial,"error-message":o(M).descricaoItemMaterial,loading:o(te),disable:!!o(h).patrimonyNumber.value,dense:"","map-options":"","emit-value":"",clearable:"","clear-icon":"close","use-input":"","input-debounce":0,onFilter:o(W),label:o(s)("materialItem")}),null,16,["modelValue","options","error","error-message","loading","disable","onFilter","label"])])]),k("div",Bn,[_(R,{disable:o(v),label:o(s)("clear"),class:"q-mr-sm",color:"grey-8",onClick:o(le)},null,8,["disable","label","onClick"]),_(R,{disable:o(v),label:o(s)("search"),color:"primary",icon:"search",type:"submit"},null,8,["disable","label"])])],32),k("div",Zn,[_($a,{class:"bg-grey-3 rounded-borders shadow-1","expand-icon-toggle":"","default-opened":""},{header:Y(()=>[k("div",zn,[k("span",Gn,de(o(s)("listing")),1),o(d).canExport?(re(),We(Fe,{key:0,name:"fa fa-file-excel",size:"sm",class:"cursor-pointer q-mr-md",color:"primary",onClick:x[12]||(x[12]=()=>u.value=!0)})):Ve("",!0)])]),default:Y(()=>{var V;return[_(ja,{columns:o($),rows:((V=o(q))==null?void 0:V.list)??[],"rows-per-page-options":o(Aa),class:"shadow-0","row-key":"id",loading:o(v),"hide-no-data":o(v),pagination:o(D),onRequest:x[13]||(x[13]=N=>o(S)(N.pagination)),"onUpdate:pagination":o(S)},{"body-cell-situacao":Y(({row:N})=>[_(qe,{style:{"min-width":"13rem"}},{default:Y(()=>[_(Ne,{options:o(Ka)(o(J)),"model-value":N.situacao,"onUpdate:modelValue":Le=>o(f)({id:N.id,situacao:Le}),loading:o(X)||o(v),dense:"","map-options":"","emit-value":"",clearable:"","hide-bottom-space":"","clear-icon":"close",label:o(s)("situation"),class:qa({"q-pl-sm":!0,"bg-foundedItem":N.situacao===o(Ct).LOCALIZED,"bg-notFoundedItem":N.situacao===o(Ct).NOT_LOCALIZED})},null,8,["options","model-value","onUpdate:modelValue","loading","label","class"])]),_:2},1024)]),"body-cell-patrimonioForaUnidade":Y(N=>[_(qe,{style:{"text-align":"center"}},{default:Y(()=>[N.row.patrimonioForaUnidade?(re(),Ie("div",Kn)):Ve("",!0)]),_:2},1024)]),"body-cell-nomeUnidadeResponsavel":Y(({row:N})=>[_(qe,{style:{width:"31rem"}},{default:Y(()=>[k("div",Xn,de(N.nomeUnidadeResponsavel),1)]),_:2},1024)]),"body-cell-descricaoItemMaterial":Y(({row:N})=>[_(qe,{style:{"max-width":"31rem"}},{default:Y(()=>[k("div",Wn,de(N.descricaoItemMaterial),1),_(nt,{style:{width:"25rem"}},{default:Y(()=>[Je(de(N.descricaoItemMaterial),1)]),_:2},1024)]),_:2},1024)]),"body-cell-acao":Y(({row:N})=>[_(qe,null,{default:Y(()=>[k("div",Jn,[_(ae,{to:{name:o(et).VIEW_ITEM,params:{id:N.id}}},{default:Y(()=>[_(R,{color:"grey-8",flat:"",icon:"fa fa-eye",round:"",size:"sm"},{default:Y(()=>[_(nt,null,{default:Y(()=>[Je(de(o(s)("view")),1)]),_:1})]),_:1})]),_:2},1032,["to"]),_(ae,{to:{name:o(et).VIEW_OBSERVATION,params:{id:N.id}}},{default:Y(()=>[_(R,{color:N.observacao||N.sala?"primary":"grey-8",flat:"",icon:"fa fa-clipboard",round:"",size:"sm"},{default:Y(()=>[_(nt,null,{default:Y(()=>[Je(de(o(s)("viewObservation")),1)]),_:1})]),_:2},1032,["color"])]),_:2},1032,["to"])])]),_:2},1024)]),loading:Y(()=>[_(La)]),"no-data":Y(()=>[k("div",eo,[k("span",{textContent:de(o(s)("noRecordsFound"))},null,8,to)])]),_:1},8,["columns","rows","rows-per-page-options","loading","hide-no-data","pagination","onUpdate:pagination"])]}),_:1}),_(Xa),k("div",ao,[o(d).canOpen?(re(),We(R,{key:0,color:"primary",class:"q-mr-sm",label:o(s)("openInventory"),loading:o(T),onClick:o(fe)},null,8,["label","loading","onClick"])):Ve("",!0),o(d).canClose?(re(),We(R,{key:1,color:"grey-8",class:"q-mr-sm",label:o(s)("closeInventory"),loading:o(Q),onClick:o(z)},null,8,["label","loading","onClick"])):Ve("",!0),_(ae,{to:{name:o(et).COMMISSION_OTHER_SITUATIONS}},{default:Y(()=>[_(R,{color:"primary",label:o(s)("otherSituations")},null,8,["label"])]),_:1},8,["to"])])])])]),_:1},8,["title","sub-title"]),_(Ba,{"is-open-ref":u.value,"is-pending-export":o(G),"is-other-situations":!1,"has-filters":o(F),onClose:g,onConfirm:o(he)},null,8,["is-open-ref","is-pending-export","has-filters","onConfirm"])],64)}}}),oo=Oa(no,[["__scopeId","data-v-5e0e7d5d"]]),Do=$t({__name:"index",setup(e){return(n,l)=>{const i=Pa("permission");return re(),Ie("div",null,[$e((re(),Ie("div",null,[_(oo)])),[[i,{project:"IVT",functionality:"IVTGER",verify:["IVTGERCOMADM"]}]]),$e((re(),Ie("div",null,[_(Wa)])),[[i,{project:"IVT",functionality:"IVTGER",verify:["IVTGERUNIADM"]}]])])}}});export{Do as default};
